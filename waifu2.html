<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    .imgs{
        display: flex;
        gap:10px;

    }
    img{
        width: 50vw;
        /* height: 100vh; */
        aspect-ratio:"16:9";       
    }
</style>
<body>
    <div class="imgs">
        <img src="" alt="" id="img" srcset="">
    </div>
    <a href="https://example.com/image.jpg" id="imgDownload" download="my-image.gif">Download</a>
    <select name="" id="type"></select>
    <script>
        const list2=["ufiaw",
"oken",
"part",
"bojwolb"]
        const lists=["waifu",
"neko",
"shinobu",
"megumin",
"bully",
"cuddle",
"cry",
"hug",
"awoo",
"kiss",
"lick",
"pat",
"smug",
"bonk",
"yeet",
"blush",
"smile",
"wave",
"highfive",
"handhold",
"nom",
"bite",
"glomp",
"slap",
"kill",
"kick",
"happy",
"wink",
"poke",
"dance",
"cringe"]
lists.forEach(l=>{
    document.querySelector("#type").innerHTML+=`<option value="${l}">${l}</option>`
})
list2.forEach(l=>{
    document.querySelector("#type").innerHTML+=`<option value="${l.split("").reverse().join("")}">${l}</option>`
})
document.querySelector("#type").addEventListener("change",s=>{
    location.search="?sfw=" +s.target.value
})
        urlPath=location.search.slice(1,).split("=").join("/")
        const apiUrl = 'https://api.waifu.pics/'+urlPath;
const params = {
//   included_tags: ['raiden-shogun', 'maid'],
  height: '>=2000',
//   is_nsfw:"true",
// gif:true,
limit:20
};

const queryParams = new URLSearchParams();

for (const key in params) {
  if (Array.isArray(params[key])) {
    params[key].forEach(value => {
      queryParams.append(key, value);
    });
  } else {
    queryParams.set(key, params[key]);
  }
}
const requestUrl = `${apiUrl}?${queryParams.toString()}`;

fetch(requestUrl)
  .then(response => {
    if (response.ok) {
      return response.json();
    } else {
      throw new Error('Request failed with status code: ' + response.status);
    }
  })
  .then(data => {
    // Process the response data as needed
    console.log(data);
    document.querySelector("#img").src=(data.url)
    document.querySelector("#imgDownload").href=(data.url)

  })
  .catch(error => {
    console.error('An error occurred:', error.message);
  });

    </script>
</body>
</html>